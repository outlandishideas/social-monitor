<?php
$buttons = $this->gatekeeper()->filterAll(array(
    '<a class="button" href="%url%"><span class="icon-edit icon-large"></span> Edit Presence</a>' => array('action'=>'edit', 'id'=>$this->presence->id)
));
?>

<div class="row">
	<div class="small-24 large-12 xlarge-8 columns">

		<?php //echo $this->partial('partials/button-bar.phtml', array('buttons'=>$buttons)); ?>

        <div class="model-header bd-btm">
            <span class="page-icon fa-lg fa-fw <?php echo $this->presence->getPresenceSign(); ?>"></span>
            <div class="picker">
                <label for="presence-switcher">Presence:</label>
                <select id="presence-switcher" data-url-template="<?php echo $this->url(array('controller'=>'presence', 'action'=>'view', 'id'=>'the_id')); ?>">
                    <?php foreach ($this->allPresences as $type=>$presences) : ?>
                        <optgroup label="<?php echo $type; ?>">
                            <?php foreach ($presences as $p) : ?>
                            <option value="<?php echo $p->id; ?>" <?php if ($p->id == $this->presence->id) { echo 'selected'; } ?>><?php echo $p->handle; ?></option>
                            <?php endforeach; ?>
                        </optgroup>
                    <?php endforeach; ?>
                </select>
            </div>
        </div>

		<?php echo $this->partial("partials/badges.phtml", array("badges" => $this->badgePartial)); ?>

	</div>
	<div class="small-24 large-12 xlarge-16 columns">

		<div class="show-for-medium-up">

			<div id="pickers" class="bd-btm">
				<?php echo $this->render('partials/chart-picker.phtml'); ?>
				<?php echo $this->render('partials/daterange.phtml'); ?>
			</div>

			<div class="chart-description"></div>

			<div id="new-chart" data-controller="presence" data-id="<?php echo $this->presence->getId(); ?>"></div>

		</div>

	</div>
</div>