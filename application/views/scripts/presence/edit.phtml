<?php
/** @var NewModel_Presence $presence */
$presence = $this->presence;
/** @var NewModel_PresenceType[] $types */
$types = $this->types;
$buttons = $this->gatekeeper()->filterAll(array(
    '<a href="%url%" class="button-bc remove">Delete</a>' => array('action'=>'delete', 'id'=>$presence->id)
));
if ($buttons && $this->showButtons) :
    ?>
    <div class="button-bc-bar">
        <div class="row bk-dark">
            <div class="small-24 large-centered columns">
                <ul class="button-group">
                    <?php foreach($buttons as $button): ?>
                        <li><?php echo $button; ?></li>
                    <?php endforeach; ?>
                </ul>
            </div>
        </div>
    </div>
<?php endif; ?>


<form method="post" action="<?php echo $this->url(); ?>">

	<fieldset class="inlineLabels">
		<h2>Presence details</h2>
        <div class="row">
            <div class="small-24 medium-8 large-4 columns">
                <p class="label">Type<span class="asteriskField">*</span></p>
            </div>
            <div class="small-24 medium-12 large-8 end columns">
                <ul class="blockLabels">
                    <?php foreach ($types as $val) : ?>
                    <li>
                        <label class="radio"><input name="type" type="radio" value="<?php echo $val->getValue(); ?>"
                            <?php if ($presence->type == $val) echo 'checked'; ?>
                            <?php if (!$this->editType) echo 'disabled'; ?>> <?php echo $val->getTitle(); ?>
                        </label>
                        <?php if (!$this->editType && ($presence->type == $val)) : ?>
                            <input type="hidden" value="<?php echo $val->getValue(); ?>" name="type">
                        <?php endif; ?>
                    </li>
                    <?php endforeach; ?>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="small-24 medium-8 large-4 columns">
                <label for="handle" class="requiredField">
                    Handle<span class="asteriskField">*</span>
                </label>
            </div>
            <div class="small-24 medium-12 large-8 end columns">
                <input name="handle" id="handle" type="text" value="<?php echo $presence->handle; ?>">
                <p class="formHint">
                    For www.facebook.com/<strong>platform</strong> or www.twitter.com/<strong>platform</strong> the handle is '<strong>platform</strong>'<br />
                    For facebook pages without vanity URLs, the handle is the long number in the URL, eg www.facebook.com/pages/My-Facebook-Page/<strong>012345678901234</strong>
                </p>
            </div>
        </div>

        <div class="row">
            <div class="small-24 medium-8 large-4 columns">
                <p class="label">Signed Off</p>
            </div>
            <div class="small-24 medium-12 large-8 end columns">
                <ul class="blockLabels">
                    <li>
                        <label class="radio"><input name="sign_off" type="radio" value="0"
                                <?php if ($presence->sign_off < 1) echo 'checked'; ?>> No
                        </label>
                    </li>
                    <li>
                        <label class="radio"><input name="sign_off" type="radio" value="1"
                                <?php if ($presence->sign_off > 0) echo 'checked'; ?>> Yes
                        </label>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="small-24 medium-8 large-4 columns">
                <p class="label">Branding</p>
            </div>
            <div class="small-24 medium-12 large-8 end columns">
                <ul class="blockLabels">
                    <li>
                        <label class="radio"><input name="branding" type="radio" value="0"
                                <?php if ($presence->branding < 1) echo 'checked'; ?>> No
                        </label>
                    </li>
                    <li>
                        <label class="radio"><input name="branding" type="radio" value="1"
                                <?php if ($presence->branding > 0) echo 'checked'; ?>> Yes
                        </label>
                    </li>
                </ul>
            </div>
        </div>
	</fieldset>
	<div class="button-bc-bar">
        <div class="row bk-dark">
            <div class="small-24 large-centered columns">
                <ul class="button-group">
                        <li><?php echo $this->gatekeeper()->filter('<a href="%url%" class="button-bc">Cancel</a>', array('controller'=>'presence', 'action'=>'index'), null, true); ?></li>
                        <li><input type="submit" value="Save" class="primaryAction button-bc"></li>
                </ul>
            </div>
        </div>
    </div>
</form>