<?php
/** @var NewModel_Presence $presence */
$presence = $this->presence;
/** @var NewModel_PresenceType[] $types */
$types = $this->types;

$topBar = $this->gatekeeper()->filterAll(array(
    '<a href="%url%" class="button-bc button-view">View</a>' => array('action'=>'view', 'id'=>$presence->id),
    '<a href="%url%" class="button-bc button-delete">Delete</a>' => array('action'=>'delete', 'id'=>$presence->id)
));
$bottomBar = array();
$cancel = $this->gatekeeper()->filter('<a href="%url%" class="button-bc">Cancel</a>', array('controller'=>'presence', 'action'=>'view', 'id'=>$presence->id), null, true);
if ($cancel) {
    $bottomBar[] = $cancel;
}
$bottomBar[] = '<button type="submit" class="button-bc button-save">Save</button>';
?>

<h2 class="page-title"><?php echo $this->title; ?></h2>

<?php
if ($topBar && $this->showButtons) {
    echo $this->partial('partials/button-bar.phtml', array('buttons'=>$topBar, 'dark'=>true));
}
?>

<form method="post" action="<?php echo $this->url(); ?>">

	<fieldset class="inlineLabels">
        <div class="row">
            <div class="small-24 medium-8 large-8 columns">
                <p class="label">Type<span class="asteriskField">*</span></p>
            </div>
            <div class="small-24 medium-16 large-16 end columns">
                <ul class="blockLabels">
                    <?php foreach ($types as $val) : ?>
                    <li>
                        <label class="radio"><input name="type" type="radio" value="<?php echo $val->getValue(); ?>"
                            <?php if ($presence->type == $val) echo 'checked'; ?>
                            <?php if (!$this->editType) echo 'disabled'; ?>> <?php echo $val->getTitle(); ?>
                        </label>
                        <?php if (!$this->editType && ($presence->type == $val)) : ?>
                            <input type="hidden" value="<?php echo $val->getValue(); ?>" name="type">
                        <?php endif; ?>
                    </li>
                    <?php endforeach; ?>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="small-24 medium-8 large-8 columns">
                <label for="handle" class="requiredField">
                    Handle<span class="asteriskField">*</span>
                </label>
            </div>
            <div class="small-24 medium-16 large-16 end columns">
                <input name="handle" id="handle" type="text" value="<?php echo $presence->handle; ?>">
                <p class="formHint">
                    For www.facebook.com/<strong>platform</strong> or www.twitter.com/<strong>platform</strong> the handle is '<strong>platform</strong>'<br />
                    For facebook pages without vanity URLs, the handle is the long number in the URL, eg www.facebook.com/pages/My-Facebook-Page/<strong>012345678901234</strong>
                </p>
            </div>
        </div>

        <div class="row">
            <div class="small-24 medium-8 large-8 columns">
                <p class="label">Signed Off</p>
            </div>
            <div class="small-24 medium-16 large-16 end columns">
                <ul class="blockLabels">
                    <li>
                        <label class="radio"><input name="sign_off" type="radio" value="0"
                                <?php if ($presence->sign_off < 1) echo 'checked'; ?>> No
                        </label>
                    </li>
                    <li>
                        <label class="radio"><input name="sign_off" type="radio" value="1"
                                <?php if ($presence->sign_off > 0) echo 'checked'; ?>> Yes
                        </label>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="small-24 medium-8 large-8 columns">
                <p class="label">Branding</p>
            </div>
            <div class="small-24 medium-16 large-16 end columns">
                <ul class="blockLabels">
                    <li>
                        <label class="radio"><input name="branding" type="radio" value="0"
                                <?php if ($presence->branding < 1) echo 'checked'; ?>> No
                        </label>
                    </li>
                    <li>
                        <label class="radio"><input name="branding" type="radio" value="1"
                                <?php if ($presence->branding > 0) echo 'checked'; ?>> Yes
                        </label>
                    </li>
                </ul>
            </div>
        </div>
	</fieldset>

    <?php echo $this->partial('partials/button-bar.phtml', array('buttons'=>$bottomBar, 'dark'=>true)); ?>
</form>