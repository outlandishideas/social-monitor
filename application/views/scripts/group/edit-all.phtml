<?php
$bottomBar = array();
$cancel = $this->gatekeeper()->filter('<a class="button-bc" href="%url%">' . $this->translate()->trans('Global.cancel') . '</a>', array('controller'=>'group', 'action'=>'index'), null, true);
if ($cancel) {
    $bottomBar[] = $cancel;
}
$bottomBar[] = '<button type="submit" class="button-bc">' . $this->translate()->trans('Global.save') . '</button>';
$topBar = $bottomBar;
array_unshift($topBar, '<div id="search-table">' . $this->translate()->trans('Global.loading-data') . '</div>');
?>

<h2 class="page-title"><?php echo $this->pageTitle; ?></h2>

<form class="edit-all" method="post" action="<?php echo $this->url(); ?>" novalidate id="edit-all-groups">

    <?php echo $this->partial('partials/button-bar.phtml', array('buttons'=>$topBar, 'dark'=>true)); ?>

    <table class="text dtable standard" id="all-groups">
        <thead>
            <tr>
                <th data-name="name" data-sort="forminput"><?php echo $this->translate()->trans('Global.display-name') ?></th>
                <th data-name="audience" data-sort="fuzzy-numeric"><?php echo $this->translate()->trans('Global.audience-size') ?></th>
            </tr>
        </thead>
        <tbody>
        <?php /** @var $group Model_Group */ ?>
        <?php foreach ($this->groups as $group) : ?>
            <tr>
                <td>
                    <input name="<?php echo $group->id; ?>_display_name" value="<?php echo htmlspecialchars($group->display_name); ?>" class="textInput"
                           type="text" id="<?php echo $group->id; ?>_display_name">
                </td>
                <td>
                    <input name="<?php echo $group->id; ?>_audience" value="<?php echo htmlspecialchars($group->audience); ?>" class="textInput"
                           type="text" id="<?php echo $group->id; ?>_audience">
                </td>
            </tr>
        <?php endforeach; ?>
        </tbody>
    </table>

    <?php echo $this->partial('partials/button-bar.phtml', array('buttons'=>$bottomBar, 'dark'=>true)); ?>
</form>

