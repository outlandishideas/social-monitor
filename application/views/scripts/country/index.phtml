<?php echo $this->gatekeeper()->filter('<p><a class="button add" href="%url%">Add new</a></p>', array('action'=>'new')); ?>

<table class="campaigns text hoverable">
	<tr>
		<th>Name</th>
		<th>Country</th>
		<th>Audience Size</th>
		<th>Facebook pages</th>
		<th>Twitter accounts</th>
		<th class="options"></th>
	</tr>
	<?php /** @var $country Model_Country */ ?>
	<?php foreach ($this->countries as $country) : ?>
	<tr>
		<td><a href="<?php echo $this->url(array('action'=>'view', 'id'=>$country->id)); ?>"><?php echo $country->display_name; ?></a></td>
		<td><?php echo $this->countryCodes[$country->country]; ?></td>
		<td><?php echo number_format($country->audience); ?></td>
		<td><?php echo number_format(count($country->getFacebookPages())); ?></td>
		<td><?php echo number_format(count($country->getTwitterAccounts())); ?></td>
		<td class="options">
			<?php
				$actions = $this->gatekeeper()->filterAll(array(
					'<a href="%url%">Edit</a>' => array('action'=>'edit', 'id'=>$country->id),
					'<a href="%url%">Presences</a>' => array('action'=>'manage', 'id'=>$country->id),
					'<a href="%url%" class="autoConfirm">Delete</a>' => array('action'=>'delete', 'id'=>$country->id)
				));
				echo implode(' | ', $actions);
			?>
		</td>
	</tr>
	<?php endforeach; ?>
</table>
